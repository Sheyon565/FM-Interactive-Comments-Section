(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();async function b(){const c=await(await fetch("/FM-Interactive-Comments-Section/data.json")).json(),o=c.currentUser,r=document.querySelector(".new-comment__data"),e=x(o);return r.prepend(e),c}function S(n,c){n.forEach(o=>{const r=document.querySelector(".comment__section"),e=E(o,c),t=document.querySelector(".new-comment");r.insertBefore(e,t)})}function x(n){const c=document.createElement("img");return c.alt=`Avatar of ${n.username}`,c.src=`/FM-Interactive-Comments-Section/${n.image.png}`,c.classList.add("new-comment__avatar"),c}function E(n,c){const o=document.createElement("article");o.classList.add("comment");const r=document.createElement("div");r.classList.add("comment__user");const e=document.createElement("div");e.classList.add("comment__wrapper");const t=document.createElement("div");t.classList.add("comment__user-data");const s=document.createElement("img");s.src=`/FM-Interactive-Comments-Section/${n.user.image.png}`,s.alt=`Avatar of ${n.user.username}`,s.classList.add("comment__data-avatar"),t.appendChild(s);const a=document.createElement("p");if(a.textContent=n.user.username,a.classList.add("comment__data-name","mx-4"),t.appendChild(a),n.user.username===c.username){const d=document.createElement("span");d.textContent="you",d.classList.add("comment__badge"),t.appendChild(d)}const m=document.createElement("p");m.textContent=n.createdAt,m.classList.add("comment__data-time"),t.appendChild(m);const p=document.createElement("p");if(p.textContent=n.content,p.classList.add("comment__text"),n.replyingTo){const d=document.createElement("span");a.classList.add("mr-2"),d.classList.add("comment__text-repliedTo"),d.textContent=`@${n.replyingTo} `,p.prepend(d)}const i=document.createElement("div");i.classList.add("comment__vote");const u=document.createElement("button");u.classList.add("comment__vote-btn"),u.setAttribute("aria-label","Increase score"),u.id="up",u.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11" class="w-4 h-4 fill-current transition-colors">
    <path d="M6.33 10.896c.137 0 .255-.05.354-.149.1-.1.149-.217.149-.354V7.004h3.315c.136 0 .254-.05.354-.149.099-.1.148-.217.148-.354V5.272a.483.483 0 0 0-.148-.354.483.483 0 0 0-.354-.149H6.833V1.4a.483.483 0 0 0-.149-.354.483.483 0 0 0-.354-.149H4.915a.483.483 0 0 0-.354.149c-.1.1-.149.217-.149.354v3.37H1.08a.483.483 0 0 0-.354.15c-.1.099-.149.217-.149.353v1.23c0 .136.05.254.149.353.1.1.217.149.354.149h3.333v3.39c0 .136.05.254.15.353.098.1.216.149.353.149H6.33Z" />
  </svg>`,i.appendChild(u);const v=document.createElement("p");v.textContent=n.score,v.classList.add("comment__vote-value"),i.appendChild(v);const l=document.createElement("button");l.classList.add("comment__vote-btn"),l.setAttribute("aria-label","Decrease score"),l.id="down",l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 3" class="w-4 h-1 fill-current transition-colors">
    <path d="M9.256 2.66c.204 0 .38-.056.53-.167.148-.11.222-.243.222-.396V.722c0-.152-.074-.284-.223-.395a.859.859 0 0 0-.53-.167H.76a.859.859 0 0 0-.53.167C.083.437.009.57.009.722v1.375c0 .153.074.285.223.396a.859.859 0 0 0 .53.167h8.495Z" />
  </svg>`,i.appendChild(l);const _=document.createElement("button");_.classList.add("comment__reply-btn","group","md:hidden"),_.setAttribute("aria-label","Reply comment"),_.innerHTML=`<svg class="comment__reply-icon" width="14" height="13" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M.227 4.316 5.04.16a.657.657 0 0 1 1.085.497v2.189c4.392.05 7.875.93 7.875 5.093 0 1.68-1.082 3.344-2.279 4.214-.373.272-.905-.07-.767-.51 1.24-3.964-.588-5.017-4.829-5.078v2.404c0 .566-.664.86-1.085.496L.227 5.31a.657.657 0 0 1 0-.993Z" />
  </svg>`;const L=document.createElement("p");L.textContent="Reply",L.classList.add("comment__reply-text"),_.appendChild(L),e.appendChild(t),e.appendChild(p),r.appendChild(e),r.appendChild(i);const y=_.cloneNode(!0);if(y.classList.add("hidden","md:flex","absolute","right-0"),y.classList.remove("md:hidden"),n.user.username===c.username){const d=document.createElement("div");d.classList.add("comment__action","md:hidden");const h=document.createElement("button");h.classList.add("comment__delete-btn","group"),h.setAttribute("aria-label","Delete Comment"),h.innerHTML=`<svg class="comment__delete-icon" xmlns="http://www.w3.org/2000/svg" width="12" height="14">
        <path d="M1.167 12.448c0 .854.7 1.552 1.555 1.552h6.222c.856 0 1.556-.698 1.556-1.552V3.5H1.167v8.948Zm10.5-11.281H8.75L7.773 0h-3.88l-.976 1.167H0v1.166h11.667V1.167Z"/>
      </svg>`;const f=document.createElement("p");f.textContent="Delete",f.classList.add("comment__delete-text"),h.appendChild(f);const g=document.createElement("button");g.classList.add("comment__edit-btn","group"),g.setAttribute("aria-label","Edit Comment"),g.innerHTML=`<svg class="comment__edit-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14">
        <path d="M13.479 2.872 11.08.474a1.75 1.75 0 0 0-2.327-.06L.879 8.287a1.75 1.75 0 0 0-.5 1.06l-.375 3.648a.875.875 0 0 0 .875.954h.078l3.65-.333c.399-.04.773-.216 1.058-.499l7.875-7.875a1.68 1.68 0 0 0-.061-2.371Zm-2.975 2.923L8.159 3.449 9.865 1.7l2.389 2.39-1.75 1.706Z"/>
      </svg>`;const C=document.createElement("p");C.textContent="Edit",C.classList.add("comment__edit-text"),g.appendChild(C),d.appendChild(h),d.appendChild(g),r.appendChild(d);const w=d.cloneNode(!0);w.classList.add("hidden","md:flex"),w.classList.remove("md:hidden"),t.appendChild(w)}else t.appendChild(y),r.appendChild(_);if(o.appendChild(r),!n.replyingTo){const d=document.createElement("div");d.classList.add("comment__replies","border-grey-100"),n.replies&&n.replies.length>0&&n.replies.forEach(h=>{const f=E(h,c);d.appendChild(f)}),o.appendChild(d)}return o}function A(n,c){const o=document.createElement("form");o.setAttribute("aria-label","Post a new comment"),o.action="",o.classList.add("new-comment");const r=document.createElement("label");r.setAttribute("for","new_comment"),r.classList.add("sr-only"),o.appendChild(r);const e=document.createElement("textarea");e.classList.add("new-comment__input","border-grey-100"),e.id="new_comment",e.name="new_comment",e.placeholder="Add a comment...",e.rows=3,e.required=!0,e.value=`@${n} `,o.appendChild(e);const t=document.createElement("div");t.classList.add("new-comment__data");const s=x(c);t.appendChild(s);const a=document.createElement("button");return a.type="submit",a.classList.add("new-comment__btn"),a.textContent="REPLY",t.appendChild(a),o.appendChild(t),o}function q(n){document.querySelector(".comment__section").addEventListener("click",o=>{if(o.target.closest(".comment__reply-btn")){const r=o.target.closest("article.comment"),e=r.querySelector(".comment__data-name").textContent,t=r.querySelector(".new-comment");t&&t.remove();const s=A(e,n);r.appendChild(s);const a=s.querySelector("textarea");a.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{a&&a.focus()},500)}})}function T(){document.querySelector(".comment__section").addEventListener("click",c=>{if(c.target.closest(".comment__edit-btn")){const o=c.target.closest("article.comment");if(o.querySelector("textarea"))return;const r=o.querySelector(".comment__text"),e=r.textContent.trim(),t=document.createElement("form");t.setAttribute("aria-label","Edit your comment"),t.classList.add("edit-comment","w-full");const s=document.createElement("textarea");s.classList.add("new-comment__input"),s.required=!0,s.value=e,r.replaceWith(t),s.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{s&&s.focus(),s.style.height=s.scrollHeight+"px"},150),s.addEventListener("input",()=>{s.style.height=s.scrollHeight+"px"});const a=document.createElement("button");a.textContent="UPDATE",a.classList.add("new-comment__btn","mb-4"),t.appendChild(s),t.appendChild(a),a.addEventListener("click",()=>{const m=s.value.trim(),p=m.match(/^@(\w+)\s/),i=document.createElement("p");if(i.classList.add("comment__text"),p){const u=p[1],v=m.replace(`@${u}`,""),l=document.createElement("span");l.classList.add("comment__text-repliedTo"),l.textContent=`@${u}`,i.textContent=v,i.prepend(l)}else i.textContent=m;s.replaceWith(i),a.remove()})}})}function D(){const n=document.querySelector(".comment__section"),c=document.getElementById("deleteModal"),o=document.querySelector(".delete-action__cancel"),r=document.querySelector(".delete-action__delete");let e=null;n.addEventListener("click",t=>{t.target.closest(".comment__delete-btn")&&(e=t.target.closest("article.comment"),e&&c.classList.remove("hidden"))}),o.addEventListener("click",()=>{c.classList.add("hidden")}),r.addEventListener("click",()=>{e&&e.remove(),c.classList.add("hidden"),e=null})}function M(){document.querySelector(".comment__section").addEventListener("click",c=>{const o=c.target.closest("#up"),r=c.target.closest("#down");if(o||r){const e=c.target.closest(".comment__vote");if(!e)return;const t=e.querySelector(".comment__vote-value");if(!t)return;let s=+t.textContent.trim();o?s++:s--,t.textContent=s}})}function B(n,c){const o=document.querySelector(".comment__section");o.addEventListener("click",r=>{if(r.target.closest("#submit")){const e=r.target.closest("form.new-comment");e.addEventListener("submit",m=>{m.preventDefault()});const s={content:e.querySelector("textarea").value,createdAt:"Just now",score:0,user:n,replies:[]},a=E(s,n);o.insertBefore(a,e)}})}function H(){document.querySelectorAll("textarea").forEach(c=>{const o=()=>{c.style.height="auto",c.style.height=c.scrollHeight+"px"};c.addEventListener("input",o),o()})}async function P(){const n=await b();S(n.comments,n.currentUser),q(n.currentUser),T(),D(),M(),B(n.currentUser),H()}P();
